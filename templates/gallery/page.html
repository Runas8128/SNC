{% extends 'base.html' %}

{% block header %}
  <h1>{% block title %}Gallery{% endblock %}</h1>
{% endblock %}

{% block content %}
  <article class="post_page">
    <header>
      <div>
        <h1>{{ post['title'] }}</h1>
        <div class="about">by {{ post['author'] }} on {{ post['created'].strftime('%Y-%m-%d') }}</div>
      </div>
      <input type="button" value="Delete" onclick="checkPW('delete');">
    </header>

    <article>
      <img src="{{ post['body'] }}">
    </article>

    <hr>

    <div id="move_page">
      {% if next %}
        <div id="move_next">
          <a href='{{ url_for('gallery.page', post_id=next['id'] or 0) }}'>
            <span class="id">{{ next['id'] }}</span>
            <span class="title">{{ next['title'] }}</span>
            <span class="author">{{ next['author'] }}</span>
            <span class="created">{{ next['created'].strftime('%Y-%m-%d') }}</span>
            <span class="view">{{ next['view'] }}</span>
          </a>
        </div>
      {% endif %}
      {% if prev %}
        <div id="move_prev">
          <a href='{{ url_for('gallery.page', post_id=prev['id'] or 0) }}'>
            <span class="id">{{ prev['id'] }}</span>
            <span class="title">{{ prev['title'] }}</span>
            <span class="author">{{ prev['author'] }}</span>
            <span class="created">{{ prev['created'].strftime('%Y-%m-%d') }}</span>
            <span class="view">{{ prev['view'] }}</span>
          </a>
        </div>
      {% endif %}
    </div>
  </article>

  <script></script>

  <script>
    function checkPW(action) {
      const post_id = {{ post['id'] }};

      window.open(
        `/gallery/${post_id}/check_${action}`,
        "a",
        "width=400, height=300, left=100, top=50"
      );
    }
  </script>
{% endblock %}