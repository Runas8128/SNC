{% extends 'base.html' %}

{% block header %}
  <h1>{% block title %}Gallery{% endblock %}</h1>

  <style>
    table { width: 100%; }
    td { text-align: center; }

    td.num { width: 7.5%; }
    td.title { width: calc(50% - 75px); }
    td.image { width: 75px; }
    td.writer { width: 15%; }
    td.date { width: 15%; }
    td.count { width: 7.5%; }
  </style>
{% endblock %}

{% block content %}
  <article class="post_page">
    <header>
      <div>
        <h1>{{ post['title'] }}</h1>
        <div class="about">by {{ post['author'] }} on {{ post['created'] }}</div>
      </div>
      <input type="button" value="Delete" onclick="checkPW('delete');">
    </header>

    <article>
      <img src="{{ post['body'] }}">
    </article>

    <hr>

    <table id="move_page">
      <tr id="move_next"></tr>
      <tr id="move_prev"></tr>
    </table>
  </article>

  <script src="{{ url_for('static', filename='js/util.js') }}"></script>
  <script>
    const nextThumbnail = getThumbnail({{ next|safe }});
    if (nextThumbnail) {
      const nextDiv = document.getElementById('move_next');
      nextDiv.appendChild(generateSpan('▲', 'arrow'));
      nextDiv.appendChild(nextThumbnail);
    }

    const prevThumbnail = getThumbnail({{ prev|safe }});
    if (prevThumbnail) {
      const prevDiv = document.getElementById('move_prev');
      prevDiv.appendChild(generateSpan('▼', 'arrow'));
      prevDiv.appendChild(prevThumbnail);
    }
  </script>

  <script>
    function checkPW(action) {
      const post_id = {{ post['id'] }};

      window.open(
        `/gallery/${post_id}/check_${action}`,
        "a",
        "width=400, height=300, left=100, top=50"
      );
    }
  </script>
{% endblock %}